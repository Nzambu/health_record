{"remainingRequest":"/var/www/html/1/medbook-dev-app-vue/node_modules/babel-loader/lib/index.js!/var/www/html/1/medbook-dev-app-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/html/1/medbook-dev-app-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/1/medbook-dev-app-vue/src/auth/Password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/1/medbook-dev-app-vue/src/auth/Password.vue","mtime":1611147284480},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/cache-loader/dist/cjs.js","mtime":1610518510696},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/babel-loader/lib/index.js","mtime":1610518510640},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/cache-loader/dist/cjs.js","mtime":1610518510696},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/vue-loader/lib/index.js","mtime":1610518511764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFBhc3N3b3JkIGZyb20gJy4uL21vZGVscy9QYXNzd29yZCc7CmltcG9ydCBSZXNldFBhc3N3b3JkU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9SZXNldFBhc3N3b3JkU2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGFzc3dvcmQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2U6IG5ldyBQYXNzd29yZCgpLAogICAgICB0b2tlbklzVmFsaWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRva2VuOiBmdW5jdGlvbiB0b2tlbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgY29uc29sZS5sb2codGhpcy50b2tlbik7CiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnZhbGlkYXRlQW5kVmVyaWZ5VG9rZW4oKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiBWYWxpZGF0ZSBhbmQgVmVyaWZ5IHRoZSB0b2tlbgogICAgICovCiAgICB2YWxpZGF0ZUFuZFZlcmlmeVRva2VuOiBmdW5jdGlvbiB2YWxpZGF0ZUFuZFZlcmlmeVRva2VuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnRva2VuKSB7CiAgICAgICAgUmVzZXRQYXNzd29yZFNlcnZpY2UudmVyaWZ5UmVzZXRQYXNzd29yZFRva2VuKHRoaXMudG9rZW4pLnRoZW4oZnVuY3Rpb24gKGZlZWRiYWNrKSB7CiAgICAgICAgICB2YXIgc3RhdHVzID0gZmVlZGJhY2suc3RhdHVzOwogICAgICAgICAgY29uc29sZS5sb2coZmVlZGJhY2suZGF0YSk7CgogICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICAgICAgY2FzZSAyMDA6CiAgICAgICAgICAgICAgX3RoaXMyLnRva2VuSXNWYWxpZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0aGVyZSBpcyBhIHByb2JsZW0gIiwgc3RhdHVzKTsKICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIEhhbmRsZSBjaGFuZ2UgcGFzc3dvcmQKICAgICAqLwogICAgaGFuZGxlQ2hhbmdlUGFzc3dvcmQ6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVBhc3N3b3JkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuY2hhbmdlUGFzc3dvcmRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4oZnVuY3Rpb24gKGlzVmFsaWQpIHsKICAgICAgICBpZiAoaXNWYWxpZCA9PT0gdHJ1ZSkgewogICAgICAgICAgX3RoaXMzLmNoYW5nZS50b2tlbiA9IF90aGlzMy50b2tlbjsKICAgICAgICAgIFJlc2V0UGFzc3dvcmRTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKF90aGlzMy5jaGFuZ2UpLnRoZW4oZnVuY3Rpb24gKGZlZWRiYWNrKSB7CiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmZWVkYmFjay5zdGF0dXM7CgogICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cykgewogICAgICAgICAgICAgIGNhc2UgMjA0OgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmVlZGJhY2suZGF0YSk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZlZWRiYWNrLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,OAAA,QAAA,MAAA,oBAAA;AACA,OAAA,oBAAA,MAAA,kCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IAAA,QAAA,EADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA;AAHA,GARA;AAaA,EAAA,OAbA,qBAaA;AAAA;;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,KAAA,CAAA,sBAAA;AACA,KAFA;AAGA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AAEA;AACA;AACA;AACA,IAAA,sBALA,oCAMA;AAAA;;AACA,UAAA,KAAA,KAAA,EAAA;AACA,QAAA,oBAAA,CAAA,wBAAA,CAAA,KAAA,KAAA,EAAA,IAAA,CACA,UAAA,QAAA,EAAA;AACA,cAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,kBAAA,MAAA;AACA,iBAAA,GAAA;AACA,cAAA,MAAA,CAAA,YAAA,GAAA,IAAA;AACA;;AACA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,MAAA;AALA;AAOA,SAXA,EAYA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,SAdA;AAgBA;AACA,KAzBA;;AA2BA;AACA;AACA;AACA,IAAA,oBA9BA,kCA8BA;AAAA;;AACA,WAAA,KAAA,CAAA,sBAAA,CAAA,QAAA,GAAA,IAAA,CACA,UAAA,OAAA,EAAA;AACA,YAAA,OAAA,KAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,KAAA,GAAA,MAAA,CAAA,KAAA;AACA,UAAA,oBAAA,CAAA,cAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CACA,UAAA,QAAA,EAAA;AACA,gBAAA,MAAA,GAAA,QAAA,CAAA,MAAA;;AACA,oBAAA,MAAA;AACA,mBAAA,GAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA;;AACA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AALA;AAOA,WAVA;AAYA;AACA,OAjBA;AAmBA;AAlDA;AAnBA,CAAA","sourcesContent":["<template>\n    <v-container \n        class=\"blue\"\n        fluid\n        fill-height\n    >\n        <v-row>\n            <v-col \n                offset-xl=\"4\"\n                xl=\"4\"\n                offset-lg=\"4\"\n                lg=\"4\"  \n                offset-md=\"3\"\n                md=\"6\" \n                offset-sm=\"2\"   \n                sm=\"8\" \n                xs=\"12\"         \n            >\n                <v-card\n                    class=\"mx-15 mx-xs-0\"\n                >\n                    <v-card-text class=\"pt-10\">\n                        <h1 class=\"text-center primary--text\">Change Password</h1>\n                    </v-card-text>                    \n                    <v-row class=\"px-10 pb-5\">\n                        <v-col lg=\"12\">\n                            <validation-observer\n                                ref=\"changePasswordObserver\"\n                            >\n                                <v-form \n                                    v-if=\"tokenIsValid\"\n                                >                                \n                                    <validation-provider\n                                        v-slot=\"{errors}\"\n                                        name=\"New Password\"\n                                        rules=\"required\"\n                                    >\n                                        <v-text-field\n                                            v-model=\"change.password\"\n                                            :error-messages=\"errors\"\n                                            label=\"New Password\"\n                                            type=\"password\"\n                                            required\n                                        ></v-text-field>\n                                    </validation-provider>\n                                    <validation-provider\n                                        v-slot=\"{errors}\"\n                                        name=\"Confirm Password\"\n                                        rules=\"required\"\n                                    >\n                                        <v-text-field\n                                            v-model=\"change.password_confirmation\"\n                                            :error-messages=\"errors\"\n                                            label=\"Confirm Password\"\n                                            type=\"password\"\n                                            required\n                                        ></v-text-field>\n                                    </validation-provider>\n                                    <v-row class=\"pt-5\">\n                                        <v-col lg=\"12\">\n                                            <v-btn block                                                \n                                                class=\"success text-capitalize\"\n                                                @click=\"handleChangePassword\"\n                                            >Change Password</v-btn>\n                                        </v-col>\n                                    </v-row>\n                                </v-form>\n                            </validation-observer>                            \n                        </v-col>\n                    </v-row>\n                </v-card>\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n<script>\nimport Password from '../models/Password';\nimport ResetPasswordService from '../services/ResetPasswordService';\n\nexport default {\n    name : 'Password',\n    data () {\n        return {\n            change : new Password(),\n            tokenIsValid : false,\n        }\n    },\n    computed : {\n      token() {\n        return this.$route.query.token\n      }, \n    },\n    created () {\n        console.log(this.token)\n        this.$nextTick(() => {\n            this.validateAndVerifyToken()\n        })\n    },\n    methods : {\n\n        /**\n         * Validate and Verify the token\n         */\n        validateAndVerifyToken() \n        {\n            if(this.token) {\n                ResetPasswordService.verifyResetPasswordToken(this.token).then(\n                    feedback => {\n                        let status = feedback.status\n                        console.log(feedback.data)\n                        switch(status) {\n                            case 200 :\n                                this.tokenIsValid = true\n                                break;\n                            default :\n                                console.log(\"there is a problem \", status)\n                        }\n                    },\n                    error => {\n                        console.log(error)\n                    }\n                )\n            }\n        },\n\n        /**\n         * Handle change password\n         */\n        handleChangePassword() {\n            this.$refs.changePasswordObserver.validate().then(\n                isValid => {\n                    if(isValid === true) {\n                        this.change.token = this.token\n                        ResetPasswordService.changePassword(this.change).then(\n                            feedback => {\n                                let status = feedback.status\n                                switch(status) {\n                                    case 204 :\n                                        console.log(feedback.data)\n                                        break;\n                                    default :\n                                        console.log(feedback.data)\n                                }\n                            }\n                        );\n                    }\n                }\n            )\n        }\n    }\n}\n</script>"],"sourceRoot":"src/auth"}]}