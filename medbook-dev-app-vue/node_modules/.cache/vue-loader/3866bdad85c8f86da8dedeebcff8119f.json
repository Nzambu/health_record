{"remainingRequest":"/var/www/html/1/medbook-dev-app-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/1/medbook-dev-app-vue/src/auth/Password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/1/medbook-dev-app-vue/src/auth/Password.vue","mtime":1611147284480},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/cache-loader/dist/cjs.js","mtime":1610518510696},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/babel-loader/lib/index.js","mtime":1610518510640},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/cache-loader/dist/cjs.js","mtime":1610518510696},{"path":"/var/www/html/1/medbook-dev-app-vue/node_modules/vue-loader/lib/index.js","mtime":1610518511764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYXNzd29yZCBmcm9tICcuLi9tb2RlbHMvUGFzc3dvcmQnOwppbXBvcnQgUmVzZXRQYXNzd29yZFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvUmVzZXRQYXNzd29yZFNlcnZpY2UnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZSA6ICdQYXNzd29yZCcsCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaGFuZ2UgOiBuZXcgUGFzc3dvcmQoKSwKICAgICAgICAgICAgdG9rZW5Jc1ZhbGlkIDogZmFsc2UsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkIDogewogICAgICB0b2tlbigpIHsKICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkudG9rZW4KICAgICAgfSwgCiAgICB9LAogICAgY3JlYXRlZCAoKSB7CiAgICAgICAgY29uc29sZS5sb2codGhpcy50b2tlbikKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVBbmRWZXJpZnlUb2tlbigpCiAgICAgICAgfSkKICAgIH0sCiAgICBtZXRob2RzIDogewoKICAgICAgICAvKioKICAgICAgICAgKiBWYWxpZGF0ZSBhbmQgVmVyaWZ5IHRoZSB0b2tlbgogICAgICAgICAqLwogICAgICAgIHZhbGlkYXRlQW5kVmVyaWZ5VG9rZW4oKSAKICAgICAgICB7CiAgICAgICAgICAgIGlmKHRoaXMudG9rZW4pIHsKICAgICAgICAgICAgICAgIFJlc2V0UGFzc3dvcmRTZXJ2aWNlLnZlcmlmeVJlc2V0UGFzc3dvcmRUb2tlbih0aGlzLnRva2VuKS50aGVuKAogICAgICAgICAgICAgICAgICAgIGZlZWRiYWNrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXR1cyA9IGZlZWRiYWNrLnN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmZWVkYmFjay5kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMCA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbklzVmFsaWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGhlcmUgaXMgYSBwcm9ibGVtICIsIHN0YXR1cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBIYW5kbGUgY2hhbmdlIHBhc3N3b3JkCiAgICAgICAgICovCiAgICAgICAgaGFuZGxlQ2hhbmdlUGFzc3dvcmQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY2hhbmdlUGFzc3dvcmRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4oCiAgICAgICAgICAgICAgICBpc1ZhbGlkID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihpc1ZhbGlkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlLnRva2VuID0gdGhpcy50b2tlbgogICAgICAgICAgICAgICAgICAgICAgICBSZXNldFBhc3N3b3JkU2VydmljZS5jaGFuZ2VQYXNzd29yZCh0aGlzLmNoYW5nZSkudGhlbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZWRiYWNrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhdHVzID0gZmVlZGJhY2suc3RhdHVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHN0YXR1cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwNCA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmZWVkYmFjay5kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmVlZGJhY2suZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Password.vue","sourceRoot":"src/auth","sourcesContent":["<template>\n    <v-container \n        class=\"blue\"\n        fluid\n        fill-height\n    >\n        <v-row>\n            <v-col \n                offset-xl=\"4\"\n                xl=\"4\"\n                offset-lg=\"4\"\n                lg=\"4\"  \n                offset-md=\"3\"\n                md=\"6\" \n                offset-sm=\"2\"   \n                sm=\"8\" \n                xs=\"12\"         \n            >\n                <v-card\n                    class=\"mx-15 mx-xs-0\"\n                >\n                    <v-card-text class=\"pt-10\">\n                        <h1 class=\"text-center primary--text\">Change Password</h1>\n                    </v-card-text>                    \n                    <v-row class=\"px-10 pb-5\">\n                        <v-col lg=\"12\">\n                            <validation-observer\n                                ref=\"changePasswordObserver\"\n                            >\n                                <v-form \n                                    v-if=\"tokenIsValid\"\n                                >                                \n                                    <validation-provider\n                                        v-slot=\"{errors}\"\n                                        name=\"New Password\"\n                                        rules=\"required\"\n                                    >\n                                        <v-text-field\n                                            v-model=\"change.password\"\n                                            :error-messages=\"errors\"\n                                            label=\"New Password\"\n                                            type=\"password\"\n                                            required\n                                        ></v-text-field>\n                                    </validation-provider>\n                                    <validation-provider\n                                        v-slot=\"{errors}\"\n                                        name=\"Confirm Password\"\n                                        rules=\"required\"\n                                    >\n                                        <v-text-field\n                                            v-model=\"change.password_confirmation\"\n                                            :error-messages=\"errors\"\n                                            label=\"Confirm Password\"\n                                            type=\"password\"\n                                            required\n                                        ></v-text-field>\n                                    </validation-provider>\n                                    <v-row class=\"pt-5\">\n                                        <v-col lg=\"12\">\n                                            <v-btn block                                                \n                                                class=\"success text-capitalize\"\n                                                @click=\"handleChangePassword\"\n                                            >Change Password</v-btn>\n                                        </v-col>\n                                    </v-row>\n                                </v-form>\n                            </validation-observer>                            \n                        </v-col>\n                    </v-row>\n                </v-card>\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n<script>\nimport Password from '../models/Password';\nimport ResetPasswordService from '../services/ResetPasswordService';\n\nexport default {\n    name : 'Password',\n    data () {\n        return {\n            change : new Password(),\n            tokenIsValid : false,\n        }\n    },\n    computed : {\n      token() {\n        return this.$route.query.token\n      }, \n    },\n    created () {\n        console.log(this.token)\n        this.$nextTick(() => {\n            this.validateAndVerifyToken()\n        })\n    },\n    methods : {\n\n        /**\n         * Validate and Verify the token\n         */\n        validateAndVerifyToken() \n        {\n            if(this.token) {\n                ResetPasswordService.verifyResetPasswordToken(this.token).then(\n                    feedback => {\n                        let status = feedback.status\n                        console.log(feedback.data)\n                        switch(status) {\n                            case 200 :\n                                this.tokenIsValid = true\n                                break;\n                            default :\n                                console.log(\"there is a problem \", status)\n                        }\n                    },\n                    error => {\n                        console.log(error)\n                    }\n                )\n            }\n        },\n\n        /**\n         * Handle change password\n         */\n        handleChangePassword() {\n            this.$refs.changePasswordObserver.validate().then(\n                isValid => {\n                    if(isValid === true) {\n                        this.change.token = this.token\n                        ResetPasswordService.changePassword(this.change).then(\n                            feedback => {\n                                let status = feedback.status\n                                switch(status) {\n                                    case 204 :\n                                        console.log(feedback.data)\n                                        break;\n                                    default :\n                                        console.log(feedback.data)\n                                }\n                            }\n                        );\n                    }\n                }\n            )\n        }\n    }\n}\n</script>"]}]}